(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{11:function(t,e,n){"use strict";n.d(e,"a",(function(){return O})),n.d(e,"c",(function(){return g})),n.d(e,"b",(function(){return v}));var r,c=n(6),a=n.n(c),u=n(15),o=n(5),s=n(18),i=n.n(s),l=n(25),d=function(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){i.a.defaults.headers.common.Authorization=""},f=Object(o.c)("auth/register",function(){var t=Object(u.a)(a.a.mark((function t(e,n){var r,c,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,l.a.registerUser(e);case 4:if(c=t.sent,void 0!==(u=c.data)){t.next=8;break}throw new Error("Server Error!");case 8:return d(u.token),t.abrupt("return",u);case 12:return t.prev=12,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n){return t.apply(this,arguments)}}()),j=Object(o.c)("auth/login",function(){var t=Object(u.a)(a.a.mark((function t(e,n){var r,c,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,l.a.logInUser(e);case 4:if(c=t.sent,void 0!==(u=c.data)){t.next=8;break}throw new Error("Server Error!");case 8:return d(u.token),t.abrupt("return",u);case 12:return t.prev=12,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,n){return t.apply(this,arguments)}}()),p=Object(o.c)("auth/logout",Object(u.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.logOutUser();case 3:b(),t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))),h=Object(o.c)("auth/refresh",function(){var t=Object(u.a)(a.a.mark((function t(e,n){var r,c,u,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(c=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return d(c),t.prev=5,t.next=8,l.a.fetchCurrentUser();case 8:if(u=t.sent,void 0!==(o=u.data)){t.next=12;break}throw new Error("Server Error!");case 12:return t.abrupt("return",o);case 15:return t.prev=15,t.t0=t.catch(5),t.abrupt("return",n.rejectWithValue(t.t0.message));case 18:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e,n){return t.apply(this,arguments)}}()),O={register:f,logOut:p,logIn:j,fetchCurrentUser:h},g={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUseremail:function(t){return t.auth.user.email},getIsRefreshingUser:function(t){return t.auth.isRefreshingUser},getError:function(t){return t.auth.error}},x=n(2),v=Object(o.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isRefreshingUser:!1,error:null},extraReducers:(r={},Object(x.a)(r,O.register.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0,t.error=null})),Object(x.a)(r,O.register.rejected,(function(t,e){var n=e.payload;t.error=n})),Object(x.a)(r,O.logIn.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0,t.error=null})),Object(x.a)(r,O.logIn.rejected,(function(t,e){var n=e.payload;t.error=n})),Object(x.a)(r,O.logOut.fulfilled,(function(t){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(x.a)(r,O.fetchCurrentUser.pending,(function(t){t.isRefreshingUser=!0})),Object(x.a)(r,O.fetchCurrentUser.fulfilled,(function(t,e){var n=e.payload;t.user=n,t.isLoggedIn=!0,t.isRefreshingUser=!1,t.error=null})),Object(x.a)(r,O.fetchCurrentUser.rejected,(function(t,e){var n=e.payload;t.isRefreshingUser=!1,t.error=n})),r)}).reducer},25:function(t,e,n){"use strict";var r=n(6),c=n.n(r),a=n(15),u=n(18),o=n.n(u);function s(){return(s=Object(a.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("/users/signup",e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return(i=Object(a.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("/users/login",e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(){return(l=Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.a.post("/users/logout");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return(d=Object(a.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/users/current");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return(b=Object(a.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("/contacts");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return(f=Object(a.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("/contacts",e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(){return(j=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.delete("/contacts/".concat(e));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}o.a.defaults.baseURL="https://connections-api.herokuapp.com";var p={registerUser:function(t){return s.apply(this,arguments)},logInUser:function(t){return i.apply(this,arguments)},logOutUser:function(){return l.apply(this,arguments)},fetchCurrentUser:function(){return d.apply(this,arguments)},fetchContacts:function(){return b.apply(this,arguments)},postContacts:function(t){return f.apply(this,arguments)},deleteContacts:function(t){return j.apply(this,arguments)}};e.a=p},28:function(t,e,n){t.exports={link:"AuthNav_link__1V20K",activelink:"AuthNav_activelink__Msm5x"}},3:function(t,e,n){"use strict";n.r(e),n.d(e,"fetchContactRequest",(function(){return c})),n.d(e,"fetchContactSuccess",(function(){return a})),n.d(e,"fetchContactError",(function(){return u})),n.d(e,"addContactRequest",(function(){return o})),n.d(e,"addContactSuccess",(function(){return s})),n.d(e,"addContactError",(function(){return i})),n.d(e,"deleteContactRequest",(function(){return l})),n.d(e,"deleteContactSuccess",(function(){return d})),n.d(e,"deleteContactError",(function(){return b})),n.d(e,"setContacts",(function(){return f})),n.d(e,"chengeFilter",(function(){return j}));var r=n(5),c=Object(r.b)("contact/fetchContactRequest"),a=Object(r.b)("contact/fetchContactSuccess"),u=Object(r.b)("contact/fetchContactError"),o=Object(r.b)("contact/addContactRequest"),s=Object(r.b)("contact/addContactSuccess"),i=Object(r.b)("contact/addContactError"),l=Object(r.b)("contact/deleteContactRequest"),d=Object(r.b)("contact/deleteContactSuccess"),b=Object(r.b)("contact/deleteContactError"),f=Object(r.b)("contacts/Set"),j=Object(r.b)("contacts/Filter",(function(t){return{payload:t.target.value}}))},35:function(t,e,n){t.exports={container:"UserMenu_container__s_GGj",avatar:"UserMenu_avatar__1Y0Jw",name:"UserMenu_name__1QjDF"}},39:function(t,e,n){t.exports={Spinner:"App_Spinner__3uRX5"}},51:function(t,e,n){t.exports={Container:"Container_Container__2yVBY"}},52:function(t,e,n){t.exports={header:"AppBar_header__3LZ5A"}},63:function(t,e,n){},91:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(23),u=n.n(a),o=n(21),s=n(10),i=n(50),l=(n(63),n(7)),d=n(11),b=(n(84),n(39)),f=n.n(b),j=n(92),p=n(41),h=(n(85),n(51)),O=n.n(h),g=n(1),x=function(t){var e=t.children;return Object(g.jsx)("div",{className:O.a.Container,children:e})},v=n(52),C=n.n(v),m=n(93),k=n(35),y=n.n(k);function w(){var t=Object(s.b)(),e=Object(s.c)(d.c.getUseremail);return Object(g.jsxs)("div",{className:y.a.container,children:[Object(g.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAG1BMVEW1tbW4uLi8vLzGxsbS0tLc3Nzs7Oz4+Pj////b1d6+AAADDUlEQVRo3u3aTW8TQQwG4Hfox3lcSrmmIiHXConSY4hAzbGkVM2R0gM5hxbtvd1MfzYHKshmxzO2dwNF2vkBj3a8Hu/YCR7aW+iszuqs/8n6cfH5w8eLby1Yt+NDAMBe/7KhFc57oF8L7m3RxApjOPq9sD+3W8v3KxIR+edzqxU+VSkiv18Yrek6ReQHNusGVF84tVjhiGLr2dxgfXVRy7/WW8sexZebqa0rx1j+hdZiH4vIzZXWwrEWGzGoXuLjqyxUVukSlp+orCtKrR2NFXpJa69QWMktspuMWwtKrwOFNcpYW3IrEy4imoutTLi4gEGZ9I/rpdg6y1HxDIMl9ERbhdAKh1mLpNYyGy7yM6FVCqyJ0LoTWEOhlU8JojatXaH1JU9FEwymVH261nZnbST2bebXVYvWQmAdtHcexXWizZrTZi1ss0bnP9vyb0eb3zRBgu20eAcY/pO7ST74hfwud2aoOOwd0xmuTH/h7ptsO9jGw9QrHLTYw8x0fdpIe4CMPd9Q2T8m0pVr+fgemX0wvnlnLfbB+KECP1P47nTRSs46RqqXmJ7BlD42BLi0zYau6wMdf2ydf9UGTX5gnVk9hOmalaTS1u2bNevVpdEK5762x+T8MZET0+gsbWDIiTBGNL/QL7RWGLPnsa8822GaqDkDXf26RqIW4lhj3fpkvWcOEgyfIe6AQziklYxso3dMZO9MEN4Lw0hwJ98uRNaNoEUmfyqxsoFnww9pna892Lu8JXys2IPBFK14xKC/j7OXQ+j7F/a6A0PvyF3DoG9f2EvKmnXvFNb6tRX6tp3tZGDfYm2TsG+xtkmY32L9TcJ0fuLnCMZEjaUrtMO9qnXCWmekXbusdaS2tjhrSfo1Z6x7p6YqGQblTCjVxKNR6KtHEo1CXw3+ihUMFLkiapXOYK1mPlRjr3Tmo9lrrLxI2AtOreygWUpUkgKWryzzxYW9ENbKIVS/CqV/10SjKlGtFH+s0mjNYpYzUX7T1r3RmmzYujNaJzELthWzygvbmsn/g6RYndVZnfV0rJ/xkS0+gAgoxQAAAABJRU5ErkJggg==",alt:"",width:"32",className:y.a.avatar}),Object(g.jsx)("span",{className:y.a.name,children:e}),Object(g.jsx)(m.a,{type:"button",onClick:function(){t(d.a.logOut())},children:"Log off"})]})}var R=n(28),E=n.n(R);function S(){return Object(g.jsxs)("div",{children:[Object(g.jsx)(o.b,{to:"/register",exact:!0,className:E.a.link,activeClassName:E.a.activelink,children:"Register"}),Object(g.jsx)(o.b,{to:"/login",exact:!0,className:E.a.link,activeClassName:E.a.activelink,children:"Login"})]})}function A(){var t=Object(s.c)(d.c.getIsLoggedIn);return Object(g.jsx)("header",{className:C.a.header,children:t?Object(g.jsx)(w,{}):Object(g.jsx)(S,{})})}var U,L,I,N,W=n(8),q=n(20),z=["children","redirectTo"],T=function(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/login":n,c=Object(q.a)(t,z),a=Object(s.c)(d.c.getIsLoggedIn);return Object(g.jsx)(l.b,Object(W.a)(Object(W.a)({},c),{},{children:a?e:Object(g.jsx)(l.a,{to:r})}))},V=["children","restricted","redirectTo"],_=function(t){var e=t.children,n=t.restricted,r=void 0!==n&&n,c=t.redirectTo,a=void 0===c?"/contacts":c,u=Object(q.a)(t,V),o=Object(s.c)(d.c.getIsLoggedIn)&&r;return Object(g.jsx)(l.b,Object(W.a)(Object(W.a)({},u),{},{children:o?Object(g.jsx)(l.a,{to:a}):e}))},Y=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,104))})),G=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,105))})),M=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,103))})),X=function(){var t=Object(s.b)(),e=Object(s.c)(d.c.getIsRefreshingUser);return Object(r.useEffect)((function(){t(d.a.fetchCurrentUser())}),[t]),Object(g.jsxs)(x,{children:[e?Object(g.jsx)(j.a,{className:f.a.Spinner,animation:"border"}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(A,{}),Object(g.jsx)(l.d,{children:Object(g.jsxs)(r.Suspense,{fallback:Object(g.jsx)(j.a,{className:f.a.Spinner,animation:"border"}),children:[Object(g.jsx)(_,{exact:!0,path:"/goit-react-hw-08-phonebook",redirectTo:"/register",restricted:!0,children:Object(g.jsx)(Y,{})}),Object(g.jsx)(_,{path:"/register",restricted:!0,children:Object(g.jsx)(Y,{})}),Object(g.jsx)(_,{path:"/login",restricted:!0,children:Object(g.jsx)(G,{})}),Object(g.jsx)(T,{path:"/contacts",children:Object(g.jsx)(M,{})})]})})]}),Object(g.jsx)(p.a,{})]})},F=n(27),K=n(5),B=n(19),J=n(54),H=n.n(J),Q=n(2),Z=n(9),D=n(3),P=Object(K.d)([],(U={},Object(Q.a)(U,D.fetchContactSuccess,(function(t,e){return e.payload})),Object(Q.a)(U,D.addContactSuccess,(function(t,e){var n=e.payload;return[].concat(Object(F.a)(t),[n])})),Object(Q.a)(U,D.deleteContactSuccess,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(Q.a)(U,D.setContacts,(function(t,e){var n=e.payload;return Object(F.a)(n)})),U)),$=Object(K.d)("",Object(Q.a)({},D.chengeFilter,(function(t,e){return e.payload}))),tt=Object(K.d)(!1,(L={},Object(Q.a)(L,D.fetchContactRequest,(function(){return!0})),Object(Q.a)(L,D.fetchContactSuccess,(function(){return!1})),Object(Q.a)(L,D.fetchContactError,(function(){return!1})),Object(Q.a)(L,D.addContactRequest,(function(){return!0})),Object(Q.a)(L,D.addContactSuccess,(function(){return!1})),Object(Q.a)(L,D.addContactError,(function(){return!1})),Object(Q.a)(L,D.deleteContactRequest,(function(){return!0})),Object(Q.a)(L,D.deleteContactSuccess,(function(){return!1})),Object(Q.a)(L,D.deleteContactError,(function(){return!1})),L)),et=Object(K.d)(null,(I={},Object(Q.a)(I,D.fetchContactError,(function(t,e){return e.payload})),Object(Q.a)(I,D.fetchContactRequest,(function(){return null})),Object(Q.a)(I,D.fetchContactSuccess,(function(){return null})),Object(Q.a)(I,D.addContactError,(function(t,e){return e.payload})),Object(Q.a)(I,D.addContactRequest,(function(){return null})),Object(Q.a)(I,D.addContactSuccess,(function(){return null})),Object(Q.a)(I,D.deleteContactError,(function(t,e){return e.payload})),Object(Q.a)(I,D.deleteContactRequest,(function(){return null})),Object(Q.a)(I,D.deleteContactSuccess,(function(){return null})),I)),nt=Object(K.d)(!1,(N={},Object(Q.a)(N,D.addContactRequest,(function(){return!1})),Object(Q.a)(N,D.addContactSuccess,(function(){return!0})),Object(Q.a)(N,D.addContactError,(function(){return!1})),Object(Q.a)(N,D.deleteContactRequest,(function(){return!1})),Object(Q.a)(N,D.deleteContactSuccess,(function(){return!0})),Object(Q.a)(N,D.deleteContactError,(function(){return!1})),N)),rt=Object(Z.b)({items:P,filter:$,isLoading:tt,error:et,isChangeListContacts:nt}),ct=Object(F.a)(Object(K.f)({serializableCheck:{ignoredActions:[B.a,B.f,B.b,B.c,B.d,B.e]}})),at={key:"auth",storage:H.a,whitelist:["token"]},ut=Object(K.a)({reducer:{auth:Object(B.g)(at,d.b),contacts:rt},middleware:ct,devTools:!1}),ot=Object(B.h)(ut);u.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(s.a,{store:ut,children:Object(g.jsx)(i.a,{loading:null,persistor:ot,children:Object(g.jsx)(o.a,{children:Object(g.jsx)(X,{})})})})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.b6af78a8.chunk.js.map