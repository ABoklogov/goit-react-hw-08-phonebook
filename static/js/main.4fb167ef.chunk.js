(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{10:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return g})),n.d(e,"b",(function(){return x}));var r=n(16),c=n.n(r),a=n(24),o=n(4),u=n(20),s=n.n(u);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var i,d=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){s.a.defaults.headers.common.Authorization=""},l=Object(o.c)("auth/register",function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/signup",e);case 3:return n=t.sent,r=n.data,d(r.token),t.abrupt("return",r);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),j=Object(o.c)("auth/login",function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/login",e);case 3:return n=t.sent,r=n.data,d(r.token),t.abrupt("return",r);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),f=Object(o.c)("auth/logout",Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.post("/users/logout");case 3:b(),t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",t.t0.message);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))),O=Object(o.c)("auth/refresh",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,o,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return d(a),t.prev=5,t.next=8,s.a.get("/users/current");case 8:return o=t.sent,u=o.data,t.abrupt("return",u);case 13:return t.prev=13,t.t0=t.catch(5),t.abrupt("return",t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()),h={register:l,logOut:f,logIn:j,fetchCurrentUser:O},g={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUseremail:function(t){return t.auth.user.email},getIsRefreshingUser:function(t){return t.auth.isRefreshingUser}},p=n(2),x=Object(o.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isRefreshingUser:!1,error:null},extraReducers:(i={},Object(p.a)(i,h.register.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(p.a)(i,h.register.rejected,(function(t,e){var n=e.payload;t.error=n,t.isLoggedIn=!1})),Object(p.a)(i,h.logIn.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(p.a)(i,h.logIn.rejected,(function(t,e){var n=e.payload;t.error=n,t.isLoggedIn=!1})),Object(p.a)(i,h.logOut.fulfilled,(function(t){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(p.a)(i,h.fetchCurrentUser.pending,(function(t){t.isRefreshingUser=!0})),Object(p.a)(i,h.fetchCurrentUser.fulfilled,(function(t,e){var n=e.payload;t.user=n,t.isLoggedIn=!0,t.isRefreshingUser=!1})),Object(p.a)(i,h.fetchCurrentUser.rejected,(function(t){t.isRefreshingUser=!1})),i)}).reducer},27:function(t,e,n){t.exports={link:"AuthNav_link__1V20K",activelink:"AuthNav_activelink__Msm5x"}},34:function(t,e,n){t.exports={container:"UserMenu_container__s_GGj",avatar:"UserMenu_avatar__1Y0Jw",name:"UserMenu_name__1QjDF"}},38:function(t,e,n){t.exports={Spinner:"App_Spinner__3uRX5"}},5:function(t,e,n){"use strict";n.r(e),n.d(e,"fetchContactRequest",(function(){return c})),n.d(e,"fetchContactSuccess",(function(){return a})),n.d(e,"fetchContactError",(function(){return o})),n.d(e,"addContactRequest",(function(){return u})),n.d(e,"addContactSuccess",(function(){return s})),n.d(e,"addContactError",(function(){return i})),n.d(e,"deleteContactRequest",(function(){return d})),n.d(e,"deleteContactSuccess",(function(){return b})),n.d(e,"deleteContactError",(function(){return l})),n.d(e,"setContacts",(function(){return j})),n.d(e,"chengeFilter",(function(){return f}));var r=n(4),c=Object(r.b)("contact/fetchContactRequest"),a=Object(r.b)("contact/fetchContactSuccess"),o=Object(r.b)("contact/fetchContactError"),u=Object(r.b)("contact/addContactRequest"),s=Object(r.b)("contact/addContactSuccess"),i=Object(r.b)("contact/addContactError"),d=Object(r.b)("contact/deleteContactRequest"),b=Object(r.b)("contact/deleteContactSuccess"),l=Object(r.b)("contact/deleteContactError"),j=Object(r.b)("contacts/Set"),f=Object(r.b)("contacts/Filter",(function(t){return{payload:t.target.value}}))},50:function(t,e,n){t.exports={Container:"Container_Container__2yVBY"}},51:function(t,e,n){t.exports={header:"AppBar_header__3LZ5A"}},62:function(t,e,n){},90:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(22),o=n.n(a),u=n(19),s=n(9),i=n(49),d=(n(62),n(6)),b=n(10),l=(n(83),n(38)),j=n.n(l),f=n(91),O=n(40),h=(n(84),n(50)),g=n.n(h),p=n(1),x=function(t){var e=t.children;return Object(p.jsx)("div",{className:g.a.Container,children:e})},v=n(51),C=n.n(v),m=n(92),k=n(34),R=n.n(k);function y(){var t=Object(s.b)(),e=Object(s.c)(b.c.getUseremail);return Object(p.jsxs)("div",{className:R.a.container,children:[Object(p.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAG1BMVEW1tbW4uLi8vLzGxsbS0tLc3Nzs7Oz4+Pj////b1d6+AAADDUlEQVRo3u3aTW8TQQwG4Hfox3lcSrmmIiHXConSY4hAzbGkVM2R0gM5hxbtvd1MfzYHKshmxzO2dwNF2vkBj3a8Hu/YCR7aW+iszuqs/8n6cfH5w8eLby1Yt+NDAMBe/7KhFc57oF8L7m3RxApjOPq9sD+3W8v3KxIR+edzqxU+VSkiv18Yrek6ReQHNusGVF84tVjhiGLr2dxgfXVRy7/WW8sexZebqa0rx1j+hdZiH4vIzZXWwrEWGzGoXuLjqyxUVukSlp+orCtKrR2NFXpJa69QWMktspuMWwtKrwOFNcpYW3IrEy4imoutTLi4gEGZ9I/rpdg6y1HxDIMl9ERbhdAKh1mLpNYyGy7yM6FVCqyJ0LoTWEOhlU8JojatXaH1JU9FEwymVH261nZnbST2bebXVYvWQmAdtHcexXWizZrTZi1ss0bnP9vyb0eb3zRBgu20eAcY/pO7ST74hfwud2aoOOwd0xmuTH/h7ptsO9jGw9QrHLTYw8x0fdpIe4CMPd9Q2T8m0pVr+fgemX0wvnlnLfbB+KECP1P47nTRSs46RqqXmJ7BlD42BLi0zYau6wMdf2ydf9UGTX5gnVk9hOmalaTS1u2bNevVpdEK5762x+T8MZET0+gsbWDIiTBGNL/QL7RWGLPnsa8822GaqDkDXf26RqIW4lhj3fpkvWcOEgyfIe6AQziklYxso3dMZO9MEN4Lw0hwJ98uRNaNoEUmfyqxsoFnww9pna892Lu8JXys2IPBFK14xKC/j7OXQ+j7F/a6A0PvyF3DoG9f2EvKmnXvFNb6tRX6tp3tZGDfYm2TsG+xtkmY32L9TcJ0fuLnCMZEjaUrtMO9qnXCWmekXbusdaS2tjhrSfo1Z6x7p6YqGQblTCjVxKNR6KtHEo1CXw3+ihUMFLkiapXOYK1mPlRjr3Tmo9lrrLxI2AtOreygWUpUkgKWryzzxYW9ENbKIVS/CqV/10SjKlGtFH+s0mjNYpYzUX7T1r3RmmzYujNaJzELthWzygvbmsn/g6RYndVZnfV0rJ/xkS0+gAgoxQAAAABJRU5ErkJggg==",alt:"",width:"32",className:R.a.avatar}),Object(p.jsx)("span",{className:R.a.name,children:e}),Object(p.jsx)(m.a,{type:"button",onClick:function(){t(b.a.logOut())},children:"Log off"})]})}var A=n(27),L=n.n(A);function S(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(u.b,{to:"/register",exact:!0,className:L.a.link,activeClassName:L.a.activelink,children:"Register"}),Object(p.jsx)(u.b,{to:"/login",exact:!0,className:L.a.link,activeClassName:L.a.activelink,children:"Login"})]})}function E(){var t=Object(s.c)(b.c.getIsLoggedIn);return Object(p.jsx)("header",{className:C.a.header,children:t?Object(p.jsx)(y,{}):Object(p.jsx)(S,{})})}var w,I,U,N,q=n(7),z=n(18),T=["children","redirectTo"],W=function(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/login":n,c=Object(z.a)(t,T),a=Object(s.c)(b.c.getIsLoggedIn);return Object(p.jsx)(d.b,Object(q.a)(Object(q.a)({},c),{},{children:a?e:Object(p.jsx)(d.a,{to:r})}))},_=["children","restricted","redirectTo"],Y=function(t){var e=t.children,n=t.restricted,r=void 0!==n&&n,c=t.redirectTo,a=void 0===c?"/contacts":c,o=Object(z.a)(t,_),u=Object(s.c)(b.c.getIsLoggedIn)&&r;return Object(p.jsx)(d.b,Object(q.a)(Object(q.a)({},o),{},{children:u?Object(p.jsx)(d.a,{to:a}):e}))},G=Object(r.lazy)((function(){return n.e(5).then(n.bind(null,103))})),M=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,104))})),V=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,102))})),X=function(){var t=Object(s.b)(),e=Object(s.c)(b.c.getIsRefreshingUser);return Object(r.useEffect)((function(){t(b.a.fetchCurrentUser())}),[t]),Object(p.jsxs)(x,{children:[e?Object(p.jsx)(f.a,{className:j.a.Spinner,animation:"border"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(E,{}),Object(p.jsx)(d.d,{children:Object(p.jsxs)(r.Suspense,{fallback:Object(p.jsx)(f.a,{className:j.a.Spinner,animation:"border"}),children:[Object(p.jsx)(Y,{exact:!0,path:"/",redirectTo:"/register",restricted:!0,children:Object(p.jsx)(G,{})}),Object(p.jsx)(Y,{path:"/register",restricted:!0,children:Object(p.jsx)(G,{})}),Object(p.jsx)(Y,{path:"/login",restricted:!0,children:Object(p.jsx)(M,{})}),Object(p.jsx)(W,{path:"/contacts",children:Object(p.jsx)(V,{})})]})})]}),Object(p.jsx)(O.a,{})]})},F=n(26),K=n(4),B=n(17),J=n(53),H=n.n(J),Q=n(2),Z=n(8),D=n(5),P=Object(K.d)([],(w={},Object(Q.a)(w,D.fetchContactSuccess,(function(t,e){return e.payload})),Object(Q.a)(w,D.addContactSuccess,(function(t,e){var n=e.payload;return[].concat(Object(F.a)(t),[n])})),Object(Q.a)(w,D.deleteContactSuccess,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(Q.a)(w,D.setContacts,(function(t,e){var n=e.payload;return Object(F.a)(n)})),w)),$=Object(K.d)("",Object(Q.a)({},D.chengeFilter,(function(t,e){return e.payload}))),tt=Object(K.d)(!1,(I={},Object(Q.a)(I,D.fetchContactRequest,(function(){return!0})),Object(Q.a)(I,D.fetchContactSuccess,(function(){return!1})),Object(Q.a)(I,D.fetchContactError,(function(){return!1})),Object(Q.a)(I,D.addContactRequest,(function(){return!0})),Object(Q.a)(I,D.addContactSuccess,(function(){return!1})),Object(Q.a)(I,D.addContactError,(function(){return!1})),Object(Q.a)(I,D.deleteContactRequest,(function(){return!0})),Object(Q.a)(I,D.deleteContactSuccess,(function(){return!1})),Object(Q.a)(I,D.deleteContactError,(function(){return!1})),I)),et=Object(K.d)(null,(U={},Object(Q.a)(U,D.fetchContactError,(function(t,e){return e.payload})),Object(Q.a)(U,D.fetchContactRequest,(function(){return null})),Object(Q.a)(U,D.addContactError,(function(t,e){return e.payload})),Object(Q.a)(U,D.addContactRequest,(function(){return null})),Object(Q.a)(U,D.deleteContactError,(function(t,e){return e.payload})),Object(Q.a)(U,D.deleteContactRequest,(function(){return null})),U)),nt=Object(K.d)(!1,(N={},Object(Q.a)(N,D.addContactRequest,(function(){return!1})),Object(Q.a)(N,D.addContactSuccess,(function(){return!0})),Object(Q.a)(N,D.addContactError,(function(){return!1})),Object(Q.a)(N,D.deleteContactRequest,(function(){return!1})),Object(Q.a)(N,D.deleteContactSuccess,(function(){return!0})),Object(Q.a)(N,D.deleteContactError,(function(){return!1})),N)),rt=Object(Z.b)({items:P,filter:$,isLoading:tt,error:et,isChangeListContacts:nt}),ct=Object(F.a)(Object(K.f)({serializableCheck:{ignoredActions:[B.a,B.f,B.b,B.c,B.d,B.e]}})),at={key:"auth",storage:H.a,whitelist:["token"]},ot=Object(K.a)({reducer:{auth:Object(B.g)(at,b.b),contacts:rt},middleware:ct,devTools:!1}),ut=Object(B.h)(ot);o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(s.a,{store:ot,children:Object(p.jsx)(i.a,{loading:null,persistor:ut,children:Object(p.jsx)(u.a,{children:Object(p.jsx)(X,{})})})})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.4fb167ef.chunk.js.map