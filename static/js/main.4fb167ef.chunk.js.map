{"version":3,"sources":["redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/auth/auth-slice.js","components/AuthNav/AuthNav.module.css","components/UserMenu/UserMenu.module.css","components/App/App.module.css","redux/contacts/contacts-action.js","components/Container/Container.module.css","components/AppBar/AppBar.module.css","components/Container/Container.js","components/UserMenu/UserMenu.js","images/defaultAva.png","components/AuthNav/AuthNav.js","components/AppBar/AppBar.js","components/PrivateRoute/PrivateRoute.js","components/PublicRoute/PublicRoute.js","components/App/App.js","redux/contacts/contacts-reducer.js","redux/store.js","index.js"],"names":["axios","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","credentials","a","post","data","message","logIn","logOut","fetchCurrentUser","_","thunkAPI","state","getState","persistedToken","auth","rejectWithValue","get","operations","authSelectors","getIsLoggedIn","isLoggedIn","getUseremail","user","email","getIsRefreshingUser","isRefreshingUser","authSlice","createSlice","name","initialState","error","extraReducers","authOperations","fulfilled","payload","rejected","pending","module","exports","fetchContactRequest","createAction","fetchContactSuccess","fetchContactError","addContactRequest","addContactSuccess","addContactError","deleteContactRequest","deleteContactSuccess","deleteContactError","setContacts","chengeFilter","e","target","value","Container","children","className","s","UserMenu","dispatch","useDispatch","useSelector","container","src","alt","width","avatar","Button","type","onClick","AuthNav","to","exact","link","activeClassName","activelink","AppBar","header","PrivateRoute","redirectTo","routeProps","PublicRoute","restricted","shouldRedirect","RegisterView","lazy","LoginView","PhonebookView","App","useEffect","Spinner","animation","fallback","path","items","createReducer","filter","contact","id","isLoading","isChangeListContacts","contactsReducer","combineReducers","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","authReducer","contacts","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById"],"mappings":"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","file":"static/js/main.4fb167ef.chunk.js","sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n// import API from 'services/contacts-api';\n\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\n\nconst token = {\n  set(token) {\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n  unset() {\n    axios.defaults.headers.common.Authorization = '';\n  },\n};\n\nconst register = createAsyncThunk('auth/register', async credentials => {\n  try {\n    const { data } = await axios.post('/users/signup', credentials);\n    token.set(data.token);\n    return data;\n  } catch (error) {\n    return error.message;\n  }\n});\n\nconst logIn = createAsyncThunk('auth/login', async credentials => {\n  try {\n    const { data } = await axios.post('/users/login', credentials);\n    token.set(data.token);\n    return data;\n  } catch (error) {\n    return error.message;\n  }\n});\n\nconst logOut = createAsyncThunk('auth/logout', async () => {\n  try {\n    await axios.post('/users/logout');\n    token.unset();\n  } catch (error) {\n    return error.message;\n  }\n});\n\nconst fetchCurrentUser = createAsyncThunk(\n  'auth/refresh',\n  async (_, thunkAPI) => {\n    const state = thunkAPI.getState();\n    const persistedToken = state.auth.token;\n\n    if (persistedToken === null) {\n      return thunkAPI.rejectWithValue();\n    }\n\n    token.set(persistedToken);\n    try {\n      const { data } = await axios.get('/users/current');\n      return data;\n    } catch (error) {\n      return error.message;\n    }\n  },\n);\n\nconst operations = {\n  register,\n  logOut,\n  logIn,\n  fetchCurrentUser,\n};\nexport default operations;\n","const getIsLoggedIn = state => state.auth.isLoggedIn;\nconst getUseremail = state => state.auth.user.email;\nconst getIsRefreshingUser = state => state.auth.isRefreshingUser;\n\nconst authSelectors = {\n  getIsLoggedIn,\n  getUseremail,\n  getIsRefreshingUser,\n};\nexport default authSelectors;\n","import { createSlice } from '@reduxjs/toolkit';\nimport authOperations from './auth-operations';\n\nconst initialState = {\n  user: { name: null, email: null },\n  token: null,\n  isLoggedIn: false,\n  isRefreshingUser: false,\n  error: null,\n};\n\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  extraReducers: {\n    [authOperations.register.fulfilled](state, { payload }) {\n      state.user = payload.user;\n      state.token = payload.token;\n      state.isLoggedIn = true;\n    },\n    [authOperations.register.rejected](state, { payload }) {\n      state.error = payload;\n      state.isLoggedIn = false;\n    },\n\n    [authOperations.logIn.fulfilled](state, { payload }) {\n      state.user = payload.user;\n      state.token = payload.token;\n      state.isLoggedIn = true;\n    },\n    [authOperations.logIn.rejected](state, { payload }) {\n      state.error = payload;\n      state.isLoggedIn = false;\n    },\n\n    [authOperations.logOut.fulfilled](state) {\n      state.user = { name: null, email: null };\n      state.token = null;\n      state.isLoggedIn = false;\n    },\n\n    [authOperations.fetchCurrentUser.pending](state) {\n      state.isRefreshingUser = true;\n    },\n\n    [authOperations.fetchCurrentUser.fulfilled](state, { payload }) {\n      state.user = payload;\n      state.isLoggedIn = true;\n      state.isRefreshingUser = false;\n    },\n    [authOperations.fetchCurrentUser.rejected](state) {\n      state.isRefreshingUser = false;\n    },\n  },\n});\n\nexport default authSlice.reducer;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__1V20K\",\"activelink\":\"AuthNav_activelink__Msm5x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"UserMenu_container__s_GGj\",\"avatar\":\"UserMenu_avatar__1Y0Jw\",\"name\":\"UserMenu_name__1QjDF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Spinner\":\"App_Spinner__3uRX5\"};","import { createAction } from '@reduxjs/toolkit';\n\nexport const fetchContactRequest = createAction('contact/fetchContactRequest');\nexport const fetchContactSuccess = createAction('contact/fetchContactSuccess');\nexport const fetchContactError = createAction('contact/fetchContactError');\n\nexport const addContactRequest = createAction('contact/addContactRequest');\nexport const addContactSuccess = createAction('contact/addContactSuccess');\nexport const addContactError = createAction('contact/addContactError');\n\nexport const deleteContactRequest = createAction(\n  'contact/deleteContactRequest',\n);\nexport const deleteContactSuccess = createAction(\n  'contact/deleteContactSuccess',\n);\nexport const deleteContactError = createAction('contact/deleteContactError');\n\nexport const setContacts = createAction('contacts/Set');\n\nexport const chengeFilter = createAction('contacts/Filter', e => ({\n  payload: e.target.value,\n}));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Container_Container__2yVBY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AppBar_header__3LZ5A\"};","import s from './Container.module.css';\nimport PropTypes from 'prop-types';\n\nconst Container = ({ children }) => {\n  return <div className={s.Container}>{children}</div>;\n};\n\nContainer.propTypes = {\n  children: PropTypes.array,\n};\nexport default Container;\n","import { useDispatch, useSelector } from 'react-redux';\nimport { authSelectors, authOperations } from 'redux/auth';\nimport { Button } from 'react-bootstrap';\nimport defaultAvatar from 'images/defaultAva.png';\nimport s from './UserMenu.module.css';\n\nexport default function UserMenu() {\n  const dispatch = useDispatch();\n  const email = useSelector(authSelectors.getUseremail);\n\n  return (\n    <div className={s.container}>\n      <img src={defaultAvatar} alt=\"\" width=\"32\" className={s.avatar} />\n      <span className={s.name}>{email}</span>\n      <Button\n        type=\"button\"\n        onClick={() => {\n          dispatch(authOperations.logOut());\n        }}\n      >\n        Log off\n      </Button>\n    </div>\n  );\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAG1BMVEW1tbW4uLi8vLzGxsbS0tLc3Nzs7Oz4+Pj////b1d6+AAADDUlEQVRo3u3aTW8TQQwG4Hfox3lcSrmmIiHXConSY4hAzbGkVM2R0gM5hxbtvd1MfzYHKshmxzO2dwNF2vkBj3a8Hu/YCR7aW+iszuqs/8n6cfH5w8eLby1Yt+NDAMBe/7KhFc57oF8L7m3RxApjOPq9sD+3W8v3KxIR+edzqxU+VSkiv18Yrek6ReQHNusGVF84tVjhiGLr2dxgfXVRy7/WW8sexZebqa0rx1j+hdZiH4vIzZXWwrEWGzGoXuLjqyxUVukSlp+orCtKrR2NFXpJa69QWMktspuMWwtKrwOFNcpYW3IrEy4imoutTLi4gEGZ9I/rpdg6y1HxDIMl9ERbhdAKh1mLpNYyGy7yM6FVCqyJ0LoTWEOhlU8JojatXaH1JU9FEwymVH261nZnbST2bebXVYvWQmAdtHcexXWizZrTZi1ss0bnP9vyb0eb3zRBgu20eAcY/pO7ST74hfwud2aoOOwd0xmuTH/h7ptsO9jGw9QrHLTYw8x0fdpIe4CMPd9Q2T8m0pVr+fgemX0wvnlnLfbB+KECP1P47nTRSs46RqqXmJ7BlD42BLi0zYau6wMdf2ydf9UGTX5gnVk9hOmalaTS1u2bNevVpdEK5762x+T8MZET0+gsbWDIiTBGNL/QL7RWGLPnsa8822GaqDkDXf26RqIW4lhj3fpkvWcOEgyfIe6AQziklYxso3dMZO9MEN4Lw0hwJ98uRNaNoEUmfyqxsoFnww9pna892Lu8JXys2IPBFK14xKC/j7OXQ+j7F/a6A0PvyF3DoG9f2EvKmnXvFNb6tRX6tp3tZGDfYm2TsG+xtkmY32L9TcJ0fuLnCMZEjaUrtMO9qnXCWmekXbusdaS2tjhrSfo1Z6x7p6YqGQblTCjVxKNR6KtHEo1CXw3+ihUMFLkiapXOYK1mPlRjr3Tmo9lrrLxI2AtOreygWUpUkgKWryzzxYW9ENbKIVS/CqV/10SjKlGtFH+s0mjNYpYzUX7T1r3RmmzYujNaJzELthWzygvbmsn/g6RYndVZnfV0rJ/xkS0+gAgoxQAAAABJRU5ErkJggg==\"","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport s from './AuthNav.module.css';\n\nexport default function AuthNav() {\n  return (\n    <div>\n      <NavLink\n        to=\"/register\"\n        exact\n        className={s.link}\n        activeClassName={s.activelink}\n      >\n        Register\n      </NavLink>\n      <NavLink\n        to=\"/login\"\n        exact\n        className={s.link}\n        activeClassName={s.activelink}\n      >\n        Login\n      </NavLink>\n    </div>\n  );\n}\n","import { useSelector } from 'react-redux';\nimport s from './AppBar.module.css';\nimport { authSelectors } from 'redux/auth';\nimport UserMenu from 'components/UserMenu';\nimport AuthNav from 'components/AuthNav';\n\nexport default function AppBar() {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n\n  return (\n    <header className={s.header}>\n      {!isLoggedIn ? <AuthNav /> : <UserMenu />}\n    </header>\n  );\n}\n","import { useSelector } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\nimport { authSelectors } from 'redux/auth';\n\nconst PrivateRoute = ({ children, redirectTo = '/login', ...routeProps }) => {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n\n  return (\n    <Route {...routeProps}>\n      {isLoggedIn ? children : <Redirect to={redirectTo} />}\n    </Route>\n  );\n};\n\nexport default PrivateRoute;\n","import { useSelector } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\nimport { authSelectors } from 'redux/auth';\n\nconst PublicRoute = ({\n  children,\n  restricted = false,\n  redirectTo = '/contacts',\n  ...routeProps\n}) => {\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\n  const shouldRedirect = isLoggedIn && restricted;\n\n  return (\n    <Route {...routeProps}>\n      {shouldRedirect ? <Redirect to={redirectTo} /> : children}\n    </Route>\n  );\n};\n\nexport default PublicRoute;\n","import { Switch } from 'react-router-dom';\nimport { useEffect, Suspense, lazy } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { authOperations, authSelectors } from 'redux/auth';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport s from './App.module.css';\nimport { Spinner } from 'react-bootstrap';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Container from 'components/Container';\nimport AppBar from 'components/AppBar';\nimport PrivateRoute from 'components/PrivateRoute';\nimport PublicRoute from 'components/PublicRoute';\n\nconst RegisterView = lazy(() => import('views/RegisterView'));\nconst LoginView = lazy(() => import('views/LoginView'));\nconst PhonebookView = lazy(() => import('views/PhonebookView'));\n\nconst App = () => {\n  const dispatch = useDispatch();\n  const isRefreshingUser = useSelector(authSelectors.getIsRefreshingUser);\n\n  useEffect(() => {\n    dispatch(authOperations.fetchCurrentUser());\n  }, [dispatch]);\n\n  return (\n    <Container>\n      {isRefreshingUser ? (\n        <Spinner className={s.Spinner} animation=\"border\" />\n      ) : (\n        <>\n          <AppBar />\n\n          <Switch>\n            <Suspense\n              fallback={<Spinner className={s.Spinner} animation=\"border\" />}\n            >\n              <PublicRoute exact path=\"/\" redirectTo=\"/register\" restricted>\n                <RegisterView />\n              </PublicRoute>\n\n              <PublicRoute path=\"/register\" restricted>\n                <RegisterView />\n              </PublicRoute>\n\n              <PublicRoute path=\"/login\" restricted>\n                <LoginView />\n              </PublicRoute>\n\n              <PrivateRoute path=\"/contacts\">\n                <PhonebookView />\n              </PrivateRoute>\n            </Suspense>\n          </Switch>\n        </>\n      )}\n      <ToastContainer />\n    </Container>\n  );\n};\n\nexport default App;\n","import { combineReducers } from 'redux';\nimport { createReducer } from '@reduxjs/toolkit';\nimport {\n  fetchContactRequest,\n  fetchContactSuccess,\n  fetchContactError,\n  addContactRequest,\n  addContactSuccess,\n  addContactError,\n  deleteContactRequest,\n  deleteContactSuccess,\n  deleteContactError,\n  setContacts,\n  chengeFilter,\n} from './contacts-action';\n\nconst items = createReducer([], {\n  [fetchContactSuccess]: (_, { payload }) => payload,\n  [addContactSuccess]: (state, { payload }) => [...state, payload],\n\n  [deleteContactSuccess]: (state, { payload }) =>\n    state.filter(contact => contact.id !== payload),\n\n  [setContacts]: (_, { payload }) => [...payload],\n});\n\nconst filter = createReducer('', {\n  [chengeFilter]: (_, { payload }) => payload,\n});\n\nconst isLoading = createReducer(false, {\n  [fetchContactRequest]: () => true,\n  [fetchContactSuccess]: () => false,\n  [fetchContactError]: () => false,\n\n  [addContactRequest]: () => true,\n  [addContactSuccess]: () => false,\n  [addContactError]: () => false,\n\n  [deleteContactRequest]: () => true,\n  [deleteContactSuccess]: () => false,\n  [deleteContactError]: () => false,\n});\n\nconst error = createReducer(null, {\n  [fetchContactError]: (_, { payload }) => payload,\n  [fetchContactRequest]: () => null,\n\n  [addContactError]: (_, { payload }) => payload,\n  [addContactRequest]: () => null,\n\n  [deleteContactError]: (_, { payload }) => payload,\n  [deleteContactRequest]: () => null,\n});\n\nconst isChangeListContacts = createReducer(false, {\n  [addContactRequest]: () => false,\n  [addContactSuccess]: () => true,\n  [addContactError]: () => false,\n\n  [deleteContactRequest]: () => false,\n  [deleteContactSuccess]: () => true,\n  [deleteContactError]: () => false,\n});\n\nconst contactsReducer = combineReducers({\n  items,\n  filter,\n  isLoading,\n  error,\n  isChangeListContacts,\n});\n\nexport default contactsReducer;\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nimport contactsReducer from './contacts/contacts-reducer';\nimport { authReducer } from './auth';\n\nconst middleware = [\n  ...getDefaultMiddleware({\n    serializableCheck: {\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n    },\n  }),\n];\n\nconst authPersistConfig = {\n  key: 'auth',\n  storage,\n  whitelist: ['token'],\n};\n\nexport const store = configureStore({\n  reducer: {\n    auth: persistReducer(authPersistConfig, authReducer),\n    contacts: contactsReducer,\n  },\n  middleware,\n  devTools: process.env.NODE_ENV === 'development',\n});\n\nexport const persistor = persistStore(store);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport './index.css';\nimport App from './components/App';\nimport { store, persistor } from './redux/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}